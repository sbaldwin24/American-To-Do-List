(function(){
/*! Copyright (C) 2012 Solomka Oleg, http://legomushroom.com/
/*  https://github.com/sol0mka/TipPop
*/
$.prototype.tipPop=function(c){var d,a,b,e=this;
if(c==null){c={};}d=this;b={destroy:function(){this.destroyFocus();return this.destroyHover();},destroyHover:function(){d.off("mouseenter");d.off("mouseleave");
d.data("hover",false);d.find("div#tippop").hide();return a.m.settings.type="focus";},destroyFocus:function(){d.find("div#tippop_focus").each(function(){return $.removeData($(this).data);
});a.m.settings.type="hover";d.off("focusin");d.off("focusout");d.data("focus",false);return d.find("div#tippop_focus").hide();}};a={m:{state:{titleText:"",focusText:"",tryPositionCount:0},settings:{$tipPop:"",$that:"",offset:0,$body:$("body"),$window:$(window),type:"all",positionPriority:{hover:[],focus:[]}}},o:{init:function(f){var g;
if(f==null){f={};}g={hoverPosition:"best",focusPosition:"best",type:"all",delay:2000,offset:15,hoverPriority:["top","bottom","left","right","top_left","top_right","bottom_left","bottom_right"],focusPriority:["left","right","bottom","top","top_left","top_right","bottom_left","bottom_right"]};
f=$.extend({},g,f||{});a.m.settings.$tipPop=a.o.getTipPop();a.m.settings.$that=e;a.m.settings.offset=parseInt(f.offset,10);a.m.settings.type=f.type;a.m.settings.hoverOnShow=f.hoverOnShow;
a.m.settings.hoverOnHide=f.hoverOnHide;a.m.settings.focusOnShow=f.focusOnShow;a.m.settings.focusOnHide=f.focusOnHide;a.m.settings.focusPosition=f.focusPosition;
a.m.settings.titlePosition=f.hoverPosition;a.m.settings.positionPriority.hover=f.hoverPriority;a.m.settings.positionPriority.focus=f.focusPriority;a.e.listen(a.m.settings.$that);
return e;},getGSidesX:function(h){var g,f;f=a.m.settings.$tipPop.outerWidth()>h.outerWidth()?h.offset().left+h.outerWidth()+(Math.abs(h.outerWidth()-a.m.settings.$tipPop.outerWidth())/2):h.offset().left+h.outerWidth();
g=a.m.settings.$tipPop.outerWidth()>h.outerWidth()?h.offset().left-(Math.abs(h.outerWidth()-a.m.settings.$tipPop.outerWidth())/2):h.offset().left;return{g_right:f,g_left:g};
},getGSidesY:function(h){var g,f;f=(h.offset().top+h.outerHeight()/2)-(a.m.settings.$tipPop.outerHeight()/2);g=(h.offset().top+h.outerHeight()/2)+(a.m.settings.$tipPop.outerHeight()/2);
return{g_top:f,g_bottom:g};},getTipPop:function(){var f;f=$("body").find("div#tippop");if(f.length===0){$("body").append('<div id="tippop"></div>');f=$("div#tippop");
}return f;},focusSetEl:function(f){if(!(f.data().$el!=null)){a.m.settings.$body.append('<div id="tippop_focus" class=""></div>');f.$el=a.m.settings.$body.find("div#tippop_focus").last();
return f.data({$el:f.$el});}else{return f.$el=f.data().$el;}},getNormalize:function(j,i){var g,h,f;f=0;g=0;h="";if(i==="focus"){h=j.$el.attr("class","");
f=j.$el.outerWidth()-((j.$el.outerWidth()-j.$el.width())/4);g=j.$el.outerHeight()-((j.$el.outerHeight()-j.$el.height())/4);}else{h=a.m.settings.$tipPop.attr("class","");
f=a.m.settings.$tipPop.outerWidth()-((a.m.settings.$tipPop.outerWidth()-a.m.settings.$tipPop.width())/4);g=a.m.settings.$tipPop.outerHeight()-((a.m.settings.$tipPop.outerHeight()-a.m.settings.$tipPop.height())/4);
}return{normH:g,normW:f,normTipPop:h};},makePosition:function(j){var m,l,f,h,g,k;if(j.type==="hover"){m=a.m.settings.hoverOnShow;k=a.m.settings.$tipPop;
}else{m=a.m.settings.focusOnShow;k=j.$elem.data().$el;}l=0;if(j.positionType==="fixed"){f=j.$elem.offset().top-a.m.settings.$window.scrollTop();}else{f=j.$elem.offset().top;
}switch(j.titlePosition){case"left":console.log("---> left");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f+(j.$elem.outerHeight()/2)-(g.normH/2)-5,left:j.$elem.offset().left-a.m.settings.offset-g.normW}).stop(true,false).fadeIn(500,m);
break;case"right":console.log("---> right");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f+(j.$elem.outerHeight()/2)-(g.normH/2)-5,left:j.$elem.offset().left+j.$elem.outerWidth()+a.m.settings.offset}).stop(true,false).fadeIn(500,m);
break;case"top":console.log("---> top");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f-g.normH-a.m.settings.offset-4,left:j.$elem.offset().left+(j.$elem.outerWidth()/2)-(g.normW/2)-5}).stop(true,false).fadeIn(500,m);
break;case"top_left":console.log("---> top_left");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f-g.normH-7,left:j.$elem.offset().left-k.outerWidth()}).stop(true,false).fadeIn(500,m);
break;case"top_right":console.log("---> top_right");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f-g.normH-7,left:j.$elem.offset().left+j.$elem.outerWidth()}).stop(true,false).fadeIn(500,m);
break;case"bottom":console.log("---> bottom");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f+j.$elem.outerHeight()+a.m.settings.offset,left:j.$elem.offset().left+(j.$elem.outerWidth()/2)-(g.normW/2)-5}).stop(true,false).fadeIn(500,m);
break;case"bottom_left":console.log("---> bottom_left");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f+j.$elem.outerHeight(),left:j.$elem.offset().left-k.outerWidth()}).stop(true,false).fadeIn(500,m);
break;case"bottom_right":console.log("---> bottom_right");g=a.o.getNormalize(j.$elem,j.type);g.normTipPop.addClass(j.titlePosition).css({top:f+j.$elem.outerHeight(),left:j.$elem.offset().left+j.$elem.outerWidth()}).stop(true,false).fadeIn(500,m);
break;case"best":h=a.m.state.tryPositionCount++;if(h<a.m.settings.positionPriority[j.type].length){a.o.makePosition({$elem:j.$elem,titlePosition:a.o.tryPosition[a.m.settings.positionPriority[j.type][h]](j.$elem,j.type),type:j.type,positionType:j.positionType});
}else{a.o.makePosition({$elem:j.$elem,titlePosition:a.m.settings.positionPriority[j.type][0],type:j.type,positionType:j.positionType});}}return j.$elem;
},isVisible:function(g){var i,j,h,f;j=a.m.settings.$window.scrollTop();i=j+a.m.settings.$window.height();f=g.offset().top;h=f+g.height();return(h>=j)&&(f<=i)&&(h<=i)&&(f>=j);
},tryPosition:{left:function(h,i){var j,f;console.log("try left");f=a.o.getNormalize(h,i);j=a.o.getGSidesY(h);if((h.offset().left-f.normW-a.m.settings.offset>a.m.settings.$window.scrollLeft())&&(j.g_top>a.m.settings.$window.scrollTop())&&(j.g_bottom<a.m.settings.$window.scrollTop()+a.m.settings.$window.outerHeight())){return"left";
}else{return"best";}},right:function(h,i){var j,f;console.log("try right");f=a.o.getNormalize(h,i);j=a.o.getGSidesY(h);if((h.offset().left+h.outerWidth()+a.m.settings.offset+f.normW<a.m.settings.$window.scrollLeft()+a.m.settings.$window.outerWidth())&&(j.g_top>a.m.settings.$window.scrollTop())&&(j.g_bottom<a.m.settings.$window.scrollTop()+a.m.settings.$window.outerHeight())){return"right";
}else{return"best";}},top:function(j,h){var i,f;console.log("try top");f=a.o.getNormalize(j,h);i=a.o.getGSidesX(j);if((j.offset().top-f.normH-a.m.settings.offset-4>a.m.settings.$window.scrollTop())&&(i.g_left>a.m.settings.$window.scrollLeft())&&(i.g_right<a.m.settings.$window.scrollLeft()+a.m.settings.$window.outerWidth())){return"top";
}else{return"best";}},top_left:function(h,i){var j,f;console.log("try top left");f=a.o.getNormalize(h,i);j=a.o.getGSidesX(h);if((h.offset().top-f.normH-a.m.settings.offset-4>a.m.settings.$window.scrollTop())&&(h.offset().left-a.m.settings.$tipPop.outerWidth()>a.m.settings.$window.scrollLeft())){return"top_left";
}else{return"best";}},top_right:function(h,i){var j,f;console.log("try top right");f=a.o.getNormalize(h,i);j=a.o.getGSidesX(h);if((h.offset().top-f.normH-a.m.settings.offset-4>a.m.settings.$window.scrollTop())&&(h.offset().left+h.outerWidth()+a.m.settings.$tipPop.outerWidth()>a.m.settings.$window.scrollLeft())){return"top_right";
}else{return"best";}},bottom:function(j,h){var i,f;console.log("try bottom");f=a.o.getNormalize(j,h);i=a.o.getGSidesX(j);if(j.offset().top+j.outerHeight()+f.normH-10+a.m.settings.offset<a.m.settings.$window.scrollTop()+a.m.settings.$window.outerHeight()&&(i.g_left>a.m.settings.$window.scrollLeft())&&(i.g_right<a.m.settings.$window.scrollLeft()+a.m.settings.$window.outerWidth())){return"bottom";
}else{return"best";}},bottom_left:function(f,g){console.log("try bottom_left");if((f.offset().top+f.outerHeight()+a.m.settings.offset+a.m.settings.$tipPop.outerHeight())<(a.m.settings.$window.scrollTop()+a.m.settings.$window.outerHeight())&&(f.offset().left-a.m.settings.$tipPop.outerWidth()>a.m.settings.$window.scrollLeft())){return"bottom_left";
}else{return"best";}},bottom_right:function(f,g){console.log("try bottom_right");if((f.offset().top+f.outerHeight()+a.m.settings.offset+a.m.settings.$tipPop.outerHeight())<(a.m.settings.$window.scrollTop()+a.m.settings.$window.outerHeight())&&(f.offset().left+f.offset().left<a.m.settings.$window.scrollLeft()+a.m.settings.$window.outerWidth())){return"bottom_right";
}else{return"best";}}}},e:{listen:function(){if((a.m.settings.type==="hover")||(a.m.settings.type==="all")){if(!(a.m.settings.$that.data().hover!=null)){a.m.settings.$that.data("hover",false);
}if(!a.m.settings.$that.data().hover){a.m.settings.$that.on("mouseenter","*[title]",a.e.mouseEnterEvent);a.m.settings.$that.data("hover",true);}}if((a.m.settings.type==="focus")||(a.m.settings.type==="all")){if(!(a.m.settings.$that.data().focus!=null)){a.m.settings.$that.data("focus",false);
}if(!a.m.settings.$that.data().focus){a.m.settings.$that.on("focusin","*[data-focus]",a.e.focusInEvent);return a.m.settings.$that.data("focus",true);}}},focusInEvent:function(){var g,f,h=this;
g=$(this);a.m.state.tryPositionCount=0;a.m.settings.$tipPop.stop().fadeOut(0,a.m.settings.hoverOnHide);g.data({allowPopOnHover:false});a.o.focusSetEl(g);
if(g.attr("data-focus")!=null){a.m.state.focusText=g.attr("data-focus");g.$el.text(a.m.state.focusText);d=g.parent();f=g.css("position");if(f==="static"){f="absolute";
}g.$el.css({position:f});g.attr("title","");a.o.makePosition({$elem:g,titlePosition:a.m.settings.focusPosition,type:"focus",positionType:f,$parent:d});
return g.on("focusout",function(){g.attr("data-focus",a.m.state.focusText);g.$el.stop().fadeOut(0,a.m.settings.focusOnHide);return g.data({allowPopOnHover:true});
});}else{return g.$el.stop().fadeOut(0,a.m.settings.focusOnHide);}},mouseLeaveEvent:function(){var f;f=$(this);f.attr("title",f.data().titleText);if(f.data().allowPopOnHover){return a.m.settings.$tipPop.stop().fadeOut(0,a.m.settings.hoverOnHide);
}},mouseEnterEvent:function(){var h,g,f;h=$(this);if(!(h.data().allowPopOnHover!=null)){h.data({allowPopOnHover:"true"});}f=h.attr("data-skip");if(!(f!=null)){f="";
}if(h.data().allowPopOnHover&&(f.toLowerCase()!=="true")){a.m.state.tryPositionCount=0;if(h.attr("title")!=null){h.data("titleText",h.attr("title"));a.m.settings.$tipPop.text(h.data().titleText);
d=h.parent();g=h.css("position");if(g==="static"){g="absolute";}a.m.settings.$tipPop.css({position:g||"absolute"});h.attr("title","");a.o.makePosition({$elem:h,titlePosition:a.m.settings.titlePosition,type:"hover",positionType:g,$parent:d});
return h.on("mouseleave",a.e.mouseLeaveEvent);}else{return a.m.settings.$tipPop.hide();}}}}};switch(typeof c){case"string":return b[c]();case"object":return a.o.init(c);
}};}).call(this);